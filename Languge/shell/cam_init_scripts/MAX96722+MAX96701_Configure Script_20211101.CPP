/*
System Setup Details:
MAX96701 SVS #1 -----------------------------> MAX96722 Link A -----------------> Map to VC0, Aggregated on 1x4 D-PHY Port A
Parallel YUV422 8-bit					   ------> Pipe 0 (by default)
MAX96701 SVS  #2 -----------------------------> MAX96722 Link B -----------------> Map to VC1, Aggregated on 1x4 D-PHY Port A
Parallel YUV422 8-bit					   ------> Pipe 1 (by default)
MAX96701 SVS #3 -----------------------------> MAX96722 Link C -----------------> Map to VC2, Aggregated on 1x4 D-PHY Port A
Parallel YUV422 8-bit					   ------> Pipe 2 (by default)
MAX96701 SVS #4 -----------------------------> MAX96722 Link D -----------------> Map to VC3, Aggregated on 1x4 D-PHY Port A
Parallel YUV422 8-bit					   ------> Pipe 3 (by default)
"Serializers/Cameras I2C writes are broadcasted 
*/

// I2C write format:
// [Words to Write][I2C Slave address][I2C Register Address MSB][I2C Register Address LSB][Data Word]
//Enables VDD LDO regulator of MAX96722 
0x04,0x52,0x00,0x17,0x14, // REG_ENABLE=1
0x04,0x52,0x00,0x19,0x94, // REG_MNL=1
0x00,0x0A, // Delay 10ms

0x04,0x52,0x06,0xC2,0x10,
0x00,0x0A, // Delay 10ms
0x04,0x52,0x14,0xD1,0x03,
0x04,0x52,0x15,0xD1,0x03,
0x04,0x52,0x16,0xD1,0x03,
0x04,0x52,0x17,0xD1,0x03,
0x00,0x0A, // Delay 10ms
0x04,0x52,0x14,0x45,0x00,
0x04,0x52,0x15,0x45,0x00,
0x04,0x52,0x16,0x45,0x00,
0x04,0x52,0x17,0x45,0x00,
0x00,0x0A, // Delay 10ms

// Enable HIM Mode
0x04,0x52,0x0B,0x06,0xEF,
0x04,0x52,0x0C,0x06,0xEF,
0x04,0x52,0x0D,0x06,0xEF,
0x04,0x52,0x0E,0x06,0xEF,

0x04,0x52,0x00,0x06,0x01, // GMSL1 mode for link A
0x04,0x52,0x00,0x18,0x01, // One-shot link reset for all
0x00,0x7F, // Delay ~10ms

//Enable GMSL CLINK 
0x03,0x80,0x04,0x43,   
0x00,0x05, // Delay 5ms

//Invert HS/VS polarity
0x03,0x80,0x67,0xC4,

// Pull GPO to high voltage level for trigger mode camera
0x03,0x80,0x0F,0xBF, 

// I2C address change
0x03,0x80,0x00,0x82, 

0x04,0x52,0x00,0x06,0x02, // GMSL1 mode for link B
0x04,0x52,0x00,0x18,0x02, // One-shot link reset for all
0x00,0x7F, // Delay ~10ms

//Enable GMSL CLINK 
0x03,0x80,0x04,0x43,   
0x00,0x05, // Delay 5ms

//Invert HS/VS polarity
0x03,0x80,0x67,0xC4,

// Pull GPO to high voltage level for trigger mode camera
0x03,0x80,0x0F,0xBF, 

// I2C address change
0x03,0x80,0x00,0x84, 

0x04,0x52,0x00,0x06,0x04, // GMSL1 mode for link C
0x04,0x52,0x00,0x18,0x04, // One-shot link reset for all
0x00,0x7F, // Delay ~10ms

//Enable GMSL CLINK 
0x03,0x80,0x04,0x43,   
0x00,0x05, // Delay 5ms

//Invert HS/VS polarity
0x03,0x80,0x67,0xC4,

// Pull GPO to high voltage level for trigger mode camera
0x03,0x80,0x0F,0xBF, 

// I2C address change
0x03,0x80,0x00,0x86, 

0x04,0x52,0x00,0x06,0x08, // GMSL1 mode for link D
0x04,0x52,0x00,0x18,0x08, // One-shot link reset for all
0x00,0x7F, // Delay ~10ms

//Enable GMSL CLINK 
0x03,0x80,0x04,0x43,   
0x00,0x05, // Delay 5ms

//Invert HS/VS polarity
0x03,0x80,0x67,0xC4,

// Pull GPO to high voltage level for trigger mode camera
0x03,0x80,0x0F,0xBF, 

// I2C address change
0x03,0x80,0x00,0x88, 

0x04,0x52,0x00,0x06,0x07, // GMSL1 mode for three links
0x04,0x52,0x00,0x18,0x07, // One-shot link reset for all
0x00,0x7F, // Delay ~10ms

// Disable HS DE processing
0x04,0x52,0x0B,0x0F,0x01,
0x04,0x52,0x0C,0x0F,0x01,
0x04,0x52,0x0D,0x0F,0x01,
0x04,0x52,0x0E,0x0F,0x01,

// Turn on YUV422 8bit mux mode
0x04,0x52,0x04,0x1A,0xF0,
// YUV422 software override for all pipes since connected GMSL1 is under parallel mode
0x04,0x52,0x04,0x0B,0x40,
0x04,0x52,0x04,0x0C,0x00,
0x04,0x52,0x04,0x0D,0x00,
0x04,0x52,0x04,0x0E,0x5E,
0x04,0x52,0x04,0x0F,0x7E,
0x04,0x52,0x04,0x10,0x7A,
0x04,0x52,0x04,0x11,0x48,
0x04,0x52,0x04,0x12,0x20,

// MIPI PHY Setting
// Set Des in 2x4 mode
0x04,0x52,0x08,0xA0,0x04,
// Set Lane Mapping for 4-lane port A
0x04,0x52,0x08,0xA3,0xE4,
0x04,0x52,0x08,0xA4,0xE4,
// Set 4 lane D-PHY
0x04,0x52,0x09,0x0A,0xC0,
0x04,0x52,0x09,0x4A,0xC0,
0x04,0x52,0x09,0x8A,0xC0,
0x04,0x52,0x09,0xCA,0xC0,
// Turn on MIPI PHYs
0x04,0x52,0x08,0xA2,0xF0,
// Hold DPLL in reset (config_soft_rst_n = 0) before changing the rate
0x04,0x52,0x1C,0x00,0xF4,
0x04,0x52,0x1D,0x00,0xF4,
0x04,0x52,0x1E,0x00,0xF4,
0x04,0x52,0x1F,0x00,0xF4,
// Set Data rate to be 800Mbps/lane for port A and enable software override
0x04,0x52,0x04,0x15,0xE8,
0x04,0x52,0x04,0x18,0xE8,
// Release reset to DPLL (config_soft_rst_n = 1)
0x04,0x52,0x1C,0x00,0xF5,
0x04,0x52,0x1D,0x00,0xF5,
0x04,0x52,0x1E,0x00,0xF5,
0x04,0x52,0x1F,0x00,0xF5,


// Video Pipe to MIPI Controller Mapping
// YUV422 8bit, video pipe 0, map FS/FE
0x04,0x52,0x09,0x0B,0x07,
0x04,0x52,0x09,0x2D,0x15, // map to MIPI Controller 1
0x04,0x52,0x09,0x0D,0x1E,
0x04,0x52,0x09,0x0E,0x1E, // map to VC1
0x04,0x52,0x09,0x0F,0x00,
0x04,0x52,0x09,0x10,0x00,
0x04,0x52,0x09,0x11,0x01,
0x04,0x52,0x09,0x12,0x01,
// YUV422 8bit, video pipe 1, map FS/FE
0x04,0x52,0x09,0x4B,0x07,
0x04,0x52,0x09,0x6D,0x15, // map to MIPI Controller 1
0x04,0x52,0x09,0x4D,0x1E,
0x04,0x52,0x09,0x4E,0x5E, // map to VC0
0x04,0x52,0x09,0x4F,0x00, // frame start
0x04,0x52,0x09,0x50,0x40,
0x04,0x52,0x09,0x51,0x01,
0x04,0x52,0x09,0x52,0x41,
// YUV422 8bit, video pipe 2, map FS/FE
0x04,0x52,0x09,0x8B,0x07,
0x04,0x52,0x09,0xAD,0x15, // map to MIPI Controller 1
0x04,0x52,0x09,0x8D,0x1E,
0x04,0x52,0x09,0x8E,0x9E, // map to VC2
0x04,0x52,0x09,0x8F,0x00,
0x04,0x52,0x09,0x90,0x80,
0x04,0x52,0x09,0x91,0x01,
0x04,0x52,0x09,0x92,0x81,
// YUV422 8bit, video pipe 3, map FS/FE
0x04,0x52,0x09,0xCB,0x07,
0x04,0x52,0x09,0xED,0x15, // map to MIPI Controller 1
0x04,0x52,0x09,0xCD,0x1E,
0x04,0x52,0x09,0xCE,0xDE, // map to VC3
0x04,0x52,0x09,0xCF,0x00,
0x04,0x52,0x09,0xD0,0xC0,
0x04,0x52,0x09,0xD1,0x01,
0x04,0x52,0x09,0xD2,0xC1,

0x00,0x0F, // Delay 15ms

//  HVEN=1, HIBW=0, DBL=1
//0x03,0x82,0x07,0x84,
//0x03,0x84,0x07,0x84,
//0x03,0x86,0x07,0x84,
//0x03,0x88,0x07,0x84,

// Enable HVEN, DBL on MAX96722 depends on applications
0x04,0x52,0x0B,0x07,0x84,
0x04,0x52,0x0C,0x07,0x84,
0x04,0x52,0x0D,0x07,0x84,
0x04,0x52,0x0E,0x07,0x84,

// Enable HS/VS/DE output to GPIO just for debug
//0x04,0x52,0x00,0xFA,0x73,
//0x04,0x52,0x0E,0x08,0x01,

// Enable GMSL1 Serial Link
0x03,0x82,0x04,0x83,
0x03,0x84,0x04,0x83,
0x03,0x86,0x04,0x83,
0x03,0x88,0x04,0x83,

// Enable MIPI Output
0x04,0x52,0x08,0xA0,0x84,
0x04,0x52,0x04,0x0B,0x42,


